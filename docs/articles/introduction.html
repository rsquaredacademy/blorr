<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>A Short Introduction to the blorr Package • blorr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="A Short Introduction to the blorr Package">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="inverse" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">blorr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html">Home</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-guides" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Guides</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-guides">
<li><a class="dropdown-item" href="../articles/introduction.html">Introduction</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-reference" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Reference</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-reference">
<li><a class="dropdown-item" href="../reference/index.html">Functions</a></li>
    <li><a class="dropdown-item" href="../news/index.html">News</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rsquaredacademy/blorr"><span class="fa fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>A Short Introduction to the blorr Package</h1>
                        <h4 data-toc-skip class="author">Aravind
Hebbali</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/rsquaredacademy/blorr/blob/HEAD/vignettes/introduction.Rmd" class="external-link"><code>vignettes/introduction.Rmd</code></a></small>
      <div class="d-none name"><code>introduction.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The blorr package offers tools for building and validating binary
logistic regression models. It is most suitable for
beginner/intermediate R users and those who teach statistics using R.
The API is very simple and most of the functions take either a
<code>data.frame</code>/<code>tibble</code> or a <code>model</code> as
input. <strong>blorr</strong> use consistent prefix
<strong>blr_</strong> for easy tab completion.</p>
<div class="section level3">
<h3 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h3>
<p>You can install <strong>blorr</strong> using:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"blorr"</span><span class="op">)</span></span></code></pre></div>
<p>The documentation of the package can be found at <a href="https://blorr.rsquaredacademy.com" class="uri">https://blorr.rsquaredacademy.com</a>. This vignette gives a
quick tour of the package.</p>
</div>
<div class="section level3">
<h3 id="libraries">Libraries<a class="anchor" aria-label="anchor" href="#libraries"></a>
</h3>
<p>The following libraries are used in the examples in the vignette:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://blorr.rsquaredacademy.com/">blorr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a>
</h2>
<p>To demonstrate the features of blorr, we will use the bank marketing
data set. The data is related with direct marketing campaigns of a
Portuguese banking institution. The marketing campaigns were based on
phone calls. Often, more than one contact to the same client was
required, in order to access if the product (bank term deposit) would be
(‘yes’) or not (‘no’) subscribed. It contains a random sample (~4k) of
the original data set which can be found at <a href="https://archive.ics.uci.edu/ml/datasets/bank+marketing" class="external-link uri">https://archive.ics.uci.edu/ml/datasets/bank+marketing</a>.</p>
</div>
<div class="section level2">
<h2 id="bivariate-analysis">Bivariate Analysis<a class="anchor" aria-label="anchor" href="#bivariate-analysis"></a>
</h2>
<p>Let us begin with careful bivariate analysis of each possible
variable and the outcome variable. We will use information value and
likelihood ratio chi square test for selecting the initial set of
predictors for our model. The bivariate analysis is currently avialable
for categorical predictors only.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/blr_bivariate_analysis.html">blr_bivariate_analysis</a></span><span class="op">(</span><span class="va">bank_marketing</span>, <span class="va">y</span>, <span class="va">job</span>, <span class="va">marital</span>, <span class="va">education</span>, <span class="va">default</span>, </span>
<span>  <span class="va">housing</span>, <span class="va">loan</span>, <span class="va">contact</span>, <span class="va">poutcome</span><span class="op">)</span></span>
<span><span class="co">#&gt;                           Bivariate Analysis                           </span></span>
<span><span class="co">#&gt; ----------------------------------------------------------------------</span></span>
<span><span class="co">#&gt; Variable     Information Value    LR Chi Square    LR DF    LR p-value </span></span>
<span><span class="co">#&gt; ----------------------------------------------------------------------</span></span>
<span><span class="co">#&gt;    job             0.16              75.2690        11        0.0000   </span></span>
<span><span class="co">#&gt;  marital           0.05              21.6821         2        0.0000   </span></span>
<span><span class="co">#&gt; education          0.05              25.0466         3        0.0000   </span></span>
<span><span class="co">#&gt;  default           0.02              6.0405          1        0.0140   </span></span>
<span><span class="co">#&gt;  housing           0.16              72.2813         1        0.0000   </span></span>
<span><span class="co">#&gt;   loan             0.06              26.6615         1        0.0000   </span></span>
<span><span class="co">#&gt;  contact           0.31             124.3834         2        0.0000   </span></span>
<span><span class="co">#&gt; poutcome           0.53             270.6450         3        0.0000   </span></span>
<span><span class="co">#&gt; ----------------------------------------------------------------------</span></span></code></pre></div>
<div class="section level3">
<h3 id="weight-of-evidence-information-value">Weight of Evidence &amp; Information Value<a class="anchor" aria-label="anchor" href="#weight-of-evidence-information-value"></a>
</h3>
<p>Weight of evidence (WoE) is used to assess the relative risk of
di¤erent attributes for a characteristic and as a means to transform
characteristics into variables. It is also a very useful tool for
binning. The WoE for any group with average odds is zero. A negative WoE
indicates that the proportion of defaults is higher for that attribute
than the overall proportion and indicates higher risk.</p>
<p>The information value is used to rank order variables in terms of
their predictive power. A high information value indicates a high
ability to discriminate. Values for the information value will always be
positive and may be above 3 when assessing highly predictive
characteristics. Characteristics with information values less than 0:10
are typically viewed as weak, while values over 0.30 are sought
after.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/blr_woe_iv.html">blr_woe_iv</a></span><span class="op">(</span><span class="va">bank_marketing</span>, <span class="va">job</span>, <span class="va">y</span><span class="op">)</span></span>
<span><span class="co">#&gt;                                Weight of Evidence                                </span></span>
<span><span class="co">#&gt; --------------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt;    levels        count_0s    count_1s    dist_0s    dist_1s        woe      iv   </span></span>
<span><span class="co">#&gt; --------------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt;  management        809         130          0.20       0.25      -0.22     0.01  </span></span>
<span><span class="co">#&gt;  technician        682          79          0.17       0.15       0.11     0.00  </span></span>
<span><span class="co">#&gt; entrepreneur       139          12          0.03       0.02       0.40     0.00  </span></span>
<span><span class="co">#&gt;  blue-collar       937          73          0.23       0.14       0.51     0.05  </span></span>
<span><span class="co">#&gt;    unknown          29          2           0.01       0.00       0.61     0.00  </span></span>
<span><span class="co">#&gt;    retired         152          47          0.04       0.09      -0.87     0.05  </span></span>
<span><span class="co">#&gt;    admin.          433          61          0.11       0.12      -0.09     0.00  </span></span>
<span><span class="co">#&gt;   services         392          39          0.10       0.08       0.26     0.01  </span></span>
<span><span class="co">#&gt; self-employed      132          22          0.03       0.04      -0.26     0.00  </span></span>
<span><span class="co">#&gt;  unemployed        126          15          0.03       0.03       0.08     0.00  </span></span>
<span><span class="co">#&gt;   housemaid        110          12          0.03       0.02       0.17     0.00  </span></span>
<span><span class="co">#&gt;    student          63          25          0.02       0.05      -1.13     0.04  </span></span>
<span><span class="co">#&gt; --------------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;       Information Value       </span></span>
<span><span class="co">#&gt; -----------------------------</span></span>
<span><span class="co">#&gt; Variable    Information Value </span></span>
<span><span class="co">#&gt; -----------------------------</span></span>
<span><span class="co">#&gt;   job            0.1594       </span></span>
<span><span class="co">#&gt; -----------------------------</span></span></code></pre></div>
<div class="section level4">
<h4 id="plot">Plot<a class="anchor" aria-label="anchor" href="#plot"></a>
</h4>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">k</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/blr_woe_iv.html">blr_woe_iv</a></span><span class="op">(</span><span class="va">bank_marketing</span>, <span class="va">job</span>, <span class="va">y</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">k</span><span class="op">)</span></span></code></pre></div>
<p><img src="introduction_files/figure-html/woeplot-1.png" width="672" style="display: block; margin: auto;"></p>
</div>
<div class="section level4">
<h4 id="multiple-variables">Multiple Variables<a class="anchor" aria-label="anchor" href="#multiple-variables"></a>
</h4>
<p>We can generate the weight of evidence and information value for
multiple variables using <code><a href="../reference/blr_woe_iv_stats.html">blr_woe_iv_stats()</a></code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/blr_woe_iv_stats.html">blr_woe_iv_stats</a></span><span class="op">(</span><span class="va">bank_marketing</span>, <span class="va">y</span>, <span class="va">job</span>, <span class="va">marital</span>, <span class="va">education</span><span class="op">)</span></span>
<span><span class="co">#&gt; Variable: job</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;                                Weight of Evidence                                </span></span>
<span><span class="co">#&gt; --------------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt;    levels        count_0s    count_1s    dist_0s    dist_1s        woe      iv   </span></span>
<span><span class="co">#&gt; --------------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt;  management        809         130          0.20       0.25      -0.22     0.01  </span></span>
<span><span class="co">#&gt;  technician        682          79          0.17       0.15       0.11     0.00  </span></span>
<span><span class="co">#&gt; entrepreneur       139          12          0.03       0.02       0.40     0.00  </span></span>
<span><span class="co">#&gt;  blue-collar       937          73          0.23       0.14       0.51     0.05  </span></span>
<span><span class="co">#&gt;    unknown          29          2           0.01       0.00       0.61     0.00  </span></span>
<span><span class="co">#&gt;    retired         152          47          0.04       0.09      -0.87     0.05  </span></span>
<span><span class="co">#&gt;    admin.          433          61          0.11       0.12      -0.09     0.00  </span></span>
<span><span class="co">#&gt;   services         392          39          0.10       0.08       0.26     0.01  </span></span>
<span><span class="co">#&gt; self-employed      132          22          0.03       0.04      -0.26     0.00  </span></span>
<span><span class="co">#&gt;  unemployed        126          15          0.03       0.03       0.08     0.00  </span></span>
<span><span class="co">#&gt;   housemaid        110          12          0.03       0.02       0.17     0.00  </span></span>
<span><span class="co">#&gt;    student          63          25          0.02       0.05      -1.13     0.04  </span></span>
<span><span class="co">#&gt; --------------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;       Information Value       </span></span>
<span><span class="co">#&gt; -----------------------------</span></span>
<span><span class="co">#&gt; Variable    Information Value </span></span>
<span><span class="co">#&gt; -----------------------------</span></span>
<span><span class="co">#&gt;   job            0.1594       </span></span>
<span><span class="co">#&gt; -----------------------------</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Variable: marital</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;                             Weight of Evidence                              </span></span>
<span><span class="co">#&gt; ---------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt;  levels     count_0s    count_1s    dist_0s    dist_1s        woe      iv   </span></span>
<span><span class="co">#&gt; ---------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt; married       2467        273          0.62       0.53       0.15     0.01  </span></span>
<span><span class="co">#&gt;  single       1079        191          0.27       0.37      -0.32     0.03  </span></span>
<span><span class="co">#&gt; divorced      458          53          0.11       0.10       0.11     0.00  </span></span>
<span><span class="co">#&gt; ---------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;       Information Value       </span></span>
<span><span class="co">#&gt; -----------------------------</span></span>
<span><span class="co">#&gt; Variable    Information Value </span></span>
<span><span class="co">#&gt; -----------------------------</span></span>
<span><span class="co">#&gt; marital          0.0464       </span></span>
<span><span class="co">#&gt; -----------------------------</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Variable: education</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;                              Weight of Evidence                              </span></span>
<span><span class="co">#&gt; ----------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt;  levels      count_0s    count_1s    dist_0s    dist_1s        woe      iv   </span></span>
<span><span class="co">#&gt; ----------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt; tertiary       1104        195          0.28       0.38      -0.31     0.03  </span></span>
<span><span class="co">#&gt; secondary      2121        231          0.53       0.45       0.17     0.01  </span></span>
<span><span class="co">#&gt;  unknown       154          25          0.04       0.05      -0.23     0.00  </span></span>
<span><span class="co">#&gt;  primary       625          66          0.16       0.13       0.20     0.01  </span></span>
<span><span class="co">#&gt; ----------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;       Information Value        </span></span>
<span><span class="co">#&gt; ------------------------------</span></span>
<span><span class="co">#&gt; Variable     Information Value </span></span>
<span><span class="co">#&gt; ------------------------------</span></span>
<span><span class="co">#&gt; education         0.0539       </span></span>
<span><span class="co">#&gt; ------------------------------</span></span></code></pre></div>
<p><code><a href="../reference/blr_woe_iv.html">blr_woe_iv()</a></code> and <code><a href="../reference/blr_woe_iv_stats.html">blr_woe_iv_stats()</a></code> are
currently avialable for categorical predictors only.</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="stepwise-selection">Stepwise Selection<a class="anchor" aria-label="anchor" href="#stepwise-selection"></a>
</h2>
<p>For the initial/ first cut model, all the independent variables are
put into the model. Our goal is to include a limited number of
independent variables (5-15) which are all significant, without
sacrificing too much on the model performance. The rationale behind
not-including too many variables is that the model would be over fitted
and would become unstable when tested on the validation sample. The
variable reduction is done using forward or backward or stepwise
variable selection procedures. We will use
<code><a href="../reference/blr_step_aic_both.html">blr_step_aic_both()</a></code> to shortlist predictors for our
model.</p>
<div class="section level3">
<h3 id="model">Model<a class="anchor" aria-label="anchor" href="#model"></a>
</h3>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">bank_marketing</span>, family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">binomial</a></span><span class="op">(</span>link <span class="op">=</span> <span class="st">'logit'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="section level4">
<h4 id="selection-summary">Selection Summary<a class="anchor" aria-label="anchor" href="#selection-summary"></a>
</h4>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/blr_step_aic_both.html">blr_step_aic_both</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span>
<span><span class="co">#&gt; Stepwise Selection Method </span></span>
<span><span class="co">#&gt; -------------------------</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Candidate Terms: </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 1 . age </span></span>
<span><span class="co">#&gt; 2 . job </span></span>
<span><span class="co">#&gt; 3 . marital </span></span>
<span><span class="co">#&gt; 4 . education </span></span>
<span><span class="co">#&gt; 5 . default </span></span>
<span><span class="co">#&gt; 6 . balance </span></span>
<span><span class="co">#&gt; 7 . housing </span></span>
<span><span class="co">#&gt; 8 . loan </span></span>
<span><span class="co">#&gt; 9 . contact </span></span>
<span><span class="co">#&gt; 10 . day </span></span>
<span><span class="co">#&gt; 11 . month </span></span>
<span><span class="co">#&gt; 12 . duration </span></span>
<span><span class="co">#&gt; 13 . campaign </span></span>
<span><span class="co">#&gt; 14 . pdays </span></span>
<span><span class="co">#&gt; 15 . previous </span></span>
<span><span class="co">#&gt; 16 . poutcome </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Variables Entered/Removed: </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; - duration added </span></span>
<span><span class="co">#&gt; - poutcome added </span></span>
<span><span class="co">#&gt; - month added </span></span>
<span><span class="co">#&gt; - contact added </span></span>
<span><span class="co">#&gt; - housing added </span></span>
<span><span class="co">#&gt; - loan added </span></span>
<span><span class="co">#&gt; - campaign added </span></span>
<span><span class="co">#&gt; - marital added </span></span>
<span><span class="co">#&gt; - education added </span></span>
<span><span class="co">#&gt; - age added </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; No more variables to be added or removed.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;                      Stepwise Summary                      </span></span>
<span><span class="co">#&gt; ---------------------------------------------------------</span></span>
<span><span class="co">#&gt; Variable      Method       AIC         BIC       Deviance </span></span>
<span><span class="co">#&gt; ---------------------------------------------------------</span></span>
<span><span class="co">#&gt; duration     addition    2674.384    2687.217    2670.384 </span></span>
<span><span class="co">#&gt; poutcome     addition    2396.014    2428.097    2386.014 </span></span>
<span><span class="co">#&gt; month        addition    2274.109    2376.773    2242.109 </span></span>
<span><span class="co">#&gt; contact      addition    2207.884    2323.381    2171.884 </span></span>
<span><span class="co">#&gt; housing      addition    2184.550    2306.463    2146.550 </span></span>
<span><span class="co">#&gt; loan         addition    2171.972    2300.302    2131.972 </span></span>
<span><span class="co">#&gt; campaign     addition    2164.164    2298.910    2122.164 </span></span>
<span><span class="co">#&gt; marital      addition    2158.524    2306.103    2112.524 </span></span>
<span><span class="co">#&gt; education    addition    2155.837    2322.666    2103.837 </span></span>
<span><span class="co">#&gt; age          addition    2154.272    2327.517    2100.272 </span></span>
<span><span class="co">#&gt; ---------------------------------------------------------</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="plot-1">Plot<a class="anchor" aria-label="anchor" href="#plot-1"></a>
</h4>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/blr_step_aic_both.html">blr_step_aic_both</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Stepwise Selection Method </span></span>
<span><span class="co">#&gt; -------------------------</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Candidate Terms: </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 1 . age </span></span>
<span><span class="co">#&gt; 2 . job </span></span>
<span><span class="co">#&gt; 3 . marital </span></span>
<span><span class="co">#&gt; 4 . education </span></span>
<span><span class="co">#&gt; 5 . default </span></span>
<span><span class="co">#&gt; 6 . balance </span></span>
<span><span class="co">#&gt; 7 . housing </span></span>
<span><span class="co">#&gt; 8 . loan </span></span>
<span><span class="co">#&gt; 9 . contact </span></span>
<span><span class="co">#&gt; 10 . day </span></span>
<span><span class="co">#&gt; 11 . month </span></span>
<span><span class="co">#&gt; 12 . duration </span></span>
<span><span class="co">#&gt; 13 . campaign </span></span>
<span><span class="co">#&gt; 14 . pdays </span></span>
<span><span class="co">#&gt; 15 . previous </span></span>
<span><span class="co">#&gt; 16 . poutcome </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Variables Entered/Removed: </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; - duration added </span></span>
<span><span class="co">#&gt; - poutcome added </span></span>
<span><span class="co">#&gt; - month added </span></span>
<span><span class="co">#&gt; - contact added </span></span>
<span><span class="co">#&gt; - housing added </span></span>
<span><span class="co">#&gt; - loan added </span></span>
<span><span class="co">#&gt; - campaign added </span></span>
<span><span class="co">#&gt; - marital added </span></span>
<span><span class="co">#&gt; - education added </span></span>
<span><span class="co">#&gt; - age added </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; No more variables to be added or removed.</span></span></code></pre></div>
<p><img src="introduction_files/figure-html/stepwise3-1.png" width="672" style="display: block; margin: auto;"></p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="regression-output">Regression Output<a class="anchor" aria-label="anchor" href="#regression-output"></a>
</h2>
<div class="section level3">
<h3 id="model-1">Model<a class="anchor" aria-label="anchor" href="#model-1"></a>
</h3>
<p>We can use bivariate analysis and stepwise selection procedure to
shortlist predictors and build the model using the <code><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm()</a></code>.
The predictors used in the below model are for illustration purposes and
not necessarily shortlisted from the bivariate analysis and variable
selection procedures.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span>  <span class="va">age</span> <span class="op">+</span> <span class="va">duration</span> <span class="op">+</span> <span class="va">previous</span> <span class="op">+</span> <span class="va">housing</span> <span class="op">+</span> <span class="va">default</span> <span class="op">+</span></span>
<span>             <span class="va">loan</span> <span class="op">+</span> <span class="va">poutcome</span> <span class="op">+</span> <span class="va">job</span> <span class="op">+</span> <span class="va">marital</span>, data <span class="op">=</span> <span class="va">bank_marketing</span>, </span>
<span>             family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">binomial</a></span><span class="op">(</span>link <span class="op">=</span> <span class="st">'logit'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Use <code><a href="../reference/blr_regress.html">blr_regress()</a></code> to generate comprehensive regression
output. It accepts either of the following</p>
<ul>
<li>model built using <code><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm()</a></code>
</li>
<li>model formula and data</li>
</ul>
<div class="section level4">
<h4 id="using-model">Using Model<a class="anchor" aria-label="anchor" href="#using-model"></a>
</h4>
<p>Let us look at the output generated from
<code><a href="../reference/blr_regress.html">blr_regress()</a></code>:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/blr_regress.html">blr_regress</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span>
<span><span class="co">#&gt;                              Model Overview                              </span></span>
<span><span class="co">#&gt; ------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt; Data Set    Resp Var    Obs.    Df. Model    Df. Residual    Convergence </span></span>
<span><span class="co">#&gt; ------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt;   data         y        4521      4520           4498           TRUE     </span></span>
<span><span class="co">#&gt; ------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;                     Response Summary                     </span></span>
<span><span class="co">#&gt; --------------------------------------------------------</span></span>
<span><span class="co">#&gt; Outcome        Frequency        Outcome        Frequency </span></span>
<span><span class="co">#&gt; --------------------------------------------------------</span></span>
<span><span class="co">#&gt;    0             4004              1              517    </span></span>
<span><span class="co">#&gt; --------------------------------------------------------</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;                      Maximum Likelihood Estimates                       </span></span>
<span><span class="co">#&gt; -----------------------------------------------------------------------</span></span>
<span><span class="co">#&gt;    Parameter        DF    Estimate    Std. Error    z value     Pr(&gt;|z|) </span></span>
<span><span class="co">#&gt; -----------------------------------------------------------------------</span></span>
<span><span class="co">#&gt;   (Intercept)       1     -5.1347        0.3728    -13.7729      0.0000 </span></span>
<span><span class="co">#&gt;       age           1      0.0096        0.0067      1.4299      0.1528 </span></span>
<span><span class="co">#&gt;     duration        1      0.0042         2e-04     20.7853      0.0000 </span></span>
<span><span class="co">#&gt;     previous        1     -0.0357        0.0392     -0.9089      0.3634 </span></span>
<span><span class="co">#&gt;    housingno        1      0.7894        0.1232      6.4098      0.0000 </span></span>
<span><span class="co">#&gt;    defaultyes       1     -0.8691        0.6919     -1.2562      0.2091 </span></span>
<span><span class="co">#&gt;      loanno         1      0.6598        0.1945      3.3925       7e-04 </span></span>
<span><span class="co">#&gt; poutcomefailure     1      0.6085        0.2012      3.0248      0.0025 </span></span>
<span><span class="co">#&gt;  poutcomeother      1      1.1354        0.2700      4.2057      0.0000 </span></span>
<span><span class="co">#&gt; poutcomesuccess     1      3.2481        0.2462     13.1913      0.0000 </span></span>
<span><span class="co">#&gt;  jobtechnician      1     -0.2713        0.1806     -1.5019      0.1331 </span></span>
<span><span class="co">#&gt; jobentrepreneur     1     -0.7041        0.3809     -1.8486      0.0645 </span></span>
<span><span class="co">#&gt;  jobblue-collar     1     -0.6132        0.1867     -3.2851      0.0010 </span></span>
<span><span class="co">#&gt;    jobunknown       1     -0.9932        0.8226     -1.2073      0.2273 </span></span>
<span><span class="co">#&gt;    jobretired       1      0.3197        0.2729      1.1713      0.2415 </span></span>
<span><span class="co">#&gt;    jobadmin.        1      0.1120        0.2001      0.5599      0.5755 </span></span>
<span><span class="co">#&gt;   jobservices       1     -0.1750        0.2265     -0.7728      0.4397 </span></span>
<span><span class="co">#&gt; jobself-employed    1     -0.1408        0.3009     -0.4680      0.6398 </span></span>
<span><span class="co">#&gt;  jobunemployed      1     -0.6581        0.3432     -1.9174      0.0552 </span></span>
<span><span class="co">#&gt;   jobhousemaid      1     -0.7456        0.3932     -1.8963      0.0579 </span></span>
<span><span class="co">#&gt;    jobstudent       1      0.1927        0.3433      0.5613      0.5746 </span></span>
<span><span class="co">#&gt;  maritalsingle      1      0.5451        0.1387      3.9299       1e-04 </span></span>
<span><span class="co">#&gt; maritaldivorced     1     -0.1989        0.1986     -1.0012      0.3167 </span></span>
<span><span class="co">#&gt; -----------------------------------------------------------------------</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Association of Predicted Probabilities and Observed Responses  </span></span>
<span><span class="co">#&gt; ---------------------------------------------------------------</span></span>
<span><span class="co">#&gt; % Concordant          0.8886          Somers' D        0.7773   </span></span>
<span><span class="co">#&gt; % Discordant          0.1114          Gamma            0.7773   </span></span>
<span><span class="co">#&gt; % Tied                0.0000          Tau-a            0.1575   </span></span>
<span><span class="co">#&gt; Pairs                2070068          c                0.8886   </span></span>
<span><span class="co">#&gt; ---------------------------------------------------------------</span></span></code></pre></div>
<p>If you want to examine the odds ratio estimates, set
<code>odd_conf_limit</code> to <code>TRUE</code>. The odds ratio
estimates are not explicitly computed as we observed considerable
increase in computation time when dealing with large data sets.</p>
</div>
<div class="section level4">
<h4 id="using-formula">Using Formula<a class="anchor" aria-label="anchor" href="#using-formula"></a>
</h4>
<p>Let us use the model formula and the data set to generate the above
results.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/blr_regress.html">blr_regress</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span>  <span class="va">age</span> <span class="op">+</span> <span class="va">duration</span> <span class="op">+</span> <span class="va">previous</span> <span class="op">+</span> <span class="va">housing</span> <span class="op">+</span> <span class="va">default</span> <span class="op">+</span></span>
<span>             <span class="va">loan</span> <span class="op">+</span> <span class="va">poutcome</span> <span class="op">+</span> <span class="va">job</span> <span class="op">+</span> <span class="va">marital</span>, data <span class="op">=</span> <span class="va">bank_marketing</span><span class="op">)</span></span>
<span><span class="co">#&gt;                              Model Overview                              </span></span>
<span><span class="co">#&gt; ------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt; Data Set    Resp Var    Obs.    Df. Model    Df. Residual    Convergence </span></span>
<span><span class="co">#&gt; ------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt;   data         y        4521      4520           4498           TRUE     </span></span>
<span><span class="co">#&gt; ------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;                     Response Summary                     </span></span>
<span><span class="co">#&gt; --------------------------------------------------------</span></span>
<span><span class="co">#&gt; Outcome        Frequency        Outcome        Frequency </span></span>
<span><span class="co">#&gt; --------------------------------------------------------</span></span>
<span><span class="co">#&gt;    0             4004              1              517    </span></span>
<span><span class="co">#&gt; --------------------------------------------------------</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;                      Maximum Likelihood Estimates                       </span></span>
<span><span class="co">#&gt; -----------------------------------------------------------------------</span></span>
<span><span class="co">#&gt;    Parameter        DF    Estimate    Std. Error    z value     Pr(&gt;|z|) </span></span>
<span><span class="co">#&gt; -----------------------------------------------------------------------</span></span>
<span><span class="co">#&gt;   (Intercept)       1     -5.1347        0.3728    -13.7729      0.0000 </span></span>
<span><span class="co">#&gt;       age           1      0.0096        0.0067      1.4299      0.1528 </span></span>
<span><span class="co">#&gt;     duration        1      0.0042         2e-04     20.7853      0.0000 </span></span>
<span><span class="co">#&gt;     previous        1     -0.0357        0.0392     -0.9089      0.3634 </span></span>
<span><span class="co">#&gt;    housingno        1      0.7894        0.1232      6.4098      0.0000 </span></span>
<span><span class="co">#&gt;    defaultyes       1     -0.8691        0.6919     -1.2562      0.2091 </span></span>
<span><span class="co">#&gt;      loanno         1      0.6598        0.1945      3.3925       7e-04 </span></span>
<span><span class="co">#&gt; poutcomefailure     1      0.6085        0.2012      3.0248      0.0025 </span></span>
<span><span class="co">#&gt;  poutcomeother      1      1.1354        0.2700      4.2057      0.0000 </span></span>
<span><span class="co">#&gt; poutcomesuccess     1      3.2481        0.2462     13.1913      0.0000 </span></span>
<span><span class="co">#&gt;  jobtechnician      1     -0.2713        0.1806     -1.5019      0.1331 </span></span>
<span><span class="co">#&gt; jobentrepreneur     1     -0.7041        0.3809     -1.8486      0.0645 </span></span>
<span><span class="co">#&gt;  jobblue-collar     1     -0.6132        0.1867     -3.2851      0.0010 </span></span>
<span><span class="co">#&gt;    jobunknown       1     -0.9932        0.8226     -1.2073      0.2273 </span></span>
<span><span class="co">#&gt;    jobretired       1      0.3197        0.2729      1.1713      0.2415 </span></span>
<span><span class="co">#&gt;    jobadmin.        1      0.1120        0.2001      0.5599      0.5755 </span></span>
<span><span class="co">#&gt;   jobservices       1     -0.1750        0.2265     -0.7728      0.4397 </span></span>
<span><span class="co">#&gt; jobself-employed    1     -0.1408        0.3009     -0.4680      0.6398 </span></span>
<span><span class="co">#&gt;  jobunemployed      1     -0.6581        0.3432     -1.9174      0.0552 </span></span>
<span><span class="co">#&gt;   jobhousemaid      1     -0.7456        0.3932     -1.8963      0.0579 </span></span>
<span><span class="co">#&gt;    jobstudent       1      0.1927        0.3433      0.5613      0.5746 </span></span>
<span><span class="co">#&gt;  maritalsingle      1      0.5451        0.1387      3.9299       1e-04 </span></span>
<span><span class="co">#&gt; maritaldivorced     1     -0.1989        0.1986     -1.0012      0.3167 </span></span>
<span><span class="co">#&gt; -----------------------------------------------------------------------</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Association of Predicted Probabilities and Observed Responses  </span></span>
<span><span class="co">#&gt; ---------------------------------------------------------------</span></span>
<span><span class="co">#&gt; % Concordant          0.8886          Somers' D        0.7773   </span></span>
<span><span class="co">#&gt; % Discordant          0.1114          Gamma            0.7773   </span></span>
<span><span class="co">#&gt; % Tied                0.0000          Tau-a            0.1575   </span></span>
<span><span class="co">#&gt; Pairs                2070068          c                0.8886   </span></span>
<span><span class="co">#&gt; ---------------------------------------------------------------</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="model-fit-statistics">Model Fit Statistics<a class="anchor" aria-label="anchor" href="#model-fit-statistics"></a>
</h2>
<p>Model fit statistics are available to assess how well the model fits
the data and to compare two different models.The output includes
likelihood ratio test, AIC, BIC and a host of pseudo r-squared measures.
You can read more about pseudo r-squared <a href="https://stats.oarc.ucla.edu/other/mult-pkg/faq/general/faq-what-are-pseudo-r-squareds/" class="external-link">here</a>.</p>
<div class="section level4">
<h4 id="single-model">Single Model<a class="anchor" aria-label="anchor" href="#single-model"></a>
</h4>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/blr_model_fit_stats.html">blr_model_fit_stats</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span>
<span><span class="co">#&gt;                                Model Fit Statistics                                </span></span>
<span><span class="co">#&gt; ----------------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt; Log-Lik Intercept Only:     -1607.330    Log-Lik Full Model:             -1123.340 </span></span>
<span><span class="co">#&gt; Deviance(4498):              2246.679    LR(22):                           967.980 </span></span>
<span><span class="co">#&gt;                                          Prob &gt; LR:                          0.000 </span></span>
<span><span class="co">#&gt; MCFadden's R2                   0.301    McFadden's Adj R2:                  0.287 </span></span>
<span><span class="co">#&gt; ML (Cox-Snell) R2:              0.193    Cragg-Uhler(Nagelkerke) R2:         0.379 </span></span>
<span><span class="co">#&gt; McKelvey &amp; Zavoina's R2:        0.388    Efron's R2:                         0.278 </span></span>
<span><span class="co">#&gt; Count R2:                       0.904    Adj Count R2:                       0.157 </span></span>
<span><span class="co">#&gt; BIC:                         2440.259    AIC:                             2292.679 </span></span>
<span><span class="co">#&gt; ----------------------------------------------------------------------------------</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="model-validation">Model Validation<a class="anchor" aria-label="anchor" href="#model-validation"></a>
</h2>
<div class="section level3">
<h3 id="confusion-matrix">Confusion Matrix<a class="anchor" aria-label="anchor" href="#confusion-matrix"></a>
</h3>
<p>In the event of deciding a cut-off point on the probability scores of
a logistic regression model, a confusion matrix is created corresponding
to a particular cut-off. The observations with probability scores above
the cut-off score are predicted to be events and those below the cut-off
score, as non-events. The confusion matrix, a 2X2 table, then calculates
the number of correctly classified and miss-classified observations.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/blr_confusion_matrix.html">blr_confusion_matrix</a></span><span class="op">(</span><span class="va">model</span>, cutoff <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span>
<span><span class="co">#&gt; Confusion Matrix and Statistics </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;           Reference</span></span>
<span><span class="co">#&gt; Prediction    0    1</span></span>
<span><span class="co">#&gt;          0 3920  352</span></span>
<span><span class="co">#&gt;          1   84  165</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;                 Accuracy : 0.9036 </span></span>
<span><span class="co">#&gt;      No Information Rate : 0.8856 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;                    Kappa : 0.3851 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; McNemars's Test P-Value  : 0.0000 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;              Sensitivity : 0.3191 </span></span>
<span><span class="co">#&gt;              Specificity : 0.9790 </span></span>
<span><span class="co">#&gt;           Pos Pred Value : 0.6627 </span></span>
<span><span class="co">#&gt;           Neg Pred Value : 0.9176 </span></span>
<span><span class="co">#&gt;               Prevalence : 0.1144 </span></span>
<span><span class="co">#&gt;           Detection Rate : 0.0365 </span></span>
<span><span class="co">#&gt;     Detection Prevalence : 0.0551 </span></span>
<span><span class="co">#&gt;        Balanced Accuracy : 0.6491 </span></span>
<span><span class="co">#&gt;                Precision : 0.6627 </span></span>
<span><span class="co">#&gt;                   Recall : 0.3191 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;         'Positive' Class : 1</span></span></code></pre></div>
<p>The validity of a cut-off is measured using sensitivity, specificity
and accuracy.</p>
<ul>
<li><p><strong>Sensitivity</strong>: The % of correctly classified
events out of all events = TP / (TP + FN)</p></li>
<li><p><strong>Specificity</strong>: The % of correctly classified
non-events out of all non-events = TN / (TN + FP)</p></li>
<li><p><strong>Accuracy</strong>: The % of correctly classified
observation over all observations = (TP + TN) / (TP + FP + TN +
FN)</p></li>
<li><p><em>True Positive (TP)</em> : Events correctly classified as
events.</p></li>
<li><p><em>True Negative (TN)</em> : Non-Events correctly classified as
non-events.</p></li>
<li><p><em>False Positive (FP)</em>: Non-events miss-classified as
events.</p></li>
<li><p><em>False Negative (FN)</em>: Events miss-classified as
non-events.</p></li>
</ul>
<p>For a standard logistic model, the higher is the cut-off, the lower
will be the sensitivity and the higher would be the specificity. As the
cut-off is decreased, sensitivity will go up, as then more events would
be captured. Also, specificity will go down, as more non-events would
miss-classified as events. Hence a trade-off is done based on the
requirements. For example, if we are looking to capture as many events
as possible, and we can afford to have miss-classified non-events, then
a low cut-off is taken.</p>
</div>
<div class="section level3">
<h3 id="hosmer-lemeshow-test">Hosmer Lemeshow Test<a class="anchor" aria-label="anchor" href="#hosmer-lemeshow-test"></a>
</h3>
<p>Hosmer and Lemeshow developed a goodness-of-fit test for logistic
regression models with binary responses. The test involves dividing the
data into approximately ten groups of roughly equal size based on the
percentiles of the estimated probabilities. The observations are sorted
in increasing order of their estimated probability of having an even
outcome. The discrepancies between the observed and expected number of
observations in these groups are summarized by the Pearson chi-square
statistic, which is then compared to chi-square distribution with t
degrees of freedom, where t is the number of groups minus 2. Lower
values of Goodness-of-fit are preferred.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/blr_test_hosmer_lemeshow.html">blr_test_hosmer_lemeshow</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span>
<span><span class="co">#&gt;            Partition for the Hosmer &amp; Lemeshow Test            </span></span>
<span><span class="co">#&gt; --------------------------------------------------------------</span></span>
<span><span class="co">#&gt;                         def = 1                 def = 0        </span></span>
<span><span class="co">#&gt; Group    Total    Observed    Expected    Observed    Expected </span></span>
<span><span class="co">#&gt; --------------------------------------------------------------</span></span>
<span><span class="co">#&gt;   1       453        2          5.14        451        447.86  </span></span>
<span><span class="co">#&gt;   2       452        3          8.63        449        443.37  </span></span>
<span><span class="co">#&gt;   3       452        4         11.88        448        440.12  </span></span>
<span><span class="co">#&gt;   4       452        7         15.29        445        436.71  </span></span>
<span><span class="co">#&gt;   5       452        14        19.39        438        432.61  </span></span>
<span><span class="co">#&gt;   6       452        10        24.97        442        427.03  </span></span>
<span><span class="co">#&gt;   7       452        31        33.65        421        418.35  </span></span>
<span><span class="co">#&gt;   8       452        62        49.74        390        402.26  </span></span>
<span><span class="co">#&gt;   9       452       128        88.10        324        363.90  </span></span>
<span><span class="co">#&gt;  10       452       256        260.21       196        191.79  </span></span>
<span><span class="co">#&gt; --------------------------------------------------------------</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;      Goodness of Fit Test      </span></span>
<span><span class="co">#&gt; ------------------------------</span></span>
<span><span class="co">#&gt; Chi-Square    DF    Pr &gt; ChiSq </span></span>
<span><span class="co">#&gt; ------------------------------</span></span>
<span><span class="co">#&gt;  52.9942      8       0.0000   </span></span>
<span><span class="co">#&gt; ------------------------------</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="gains-table-lift-chart">Gains Table &amp; Lift Chart<a class="anchor" aria-label="anchor" href="#gains-table-lift-chart"></a>
</h3>
<p>A lift curve is a graphical representation of the % of cumulative
events captured at a specific cut-off. The cut-off can be a particular
decile or a percentile. Similar, to rank ordering procedure, the data is
in descending order of the scores and is then grouped into
deciles/percentiles. The cumulative number of observations and events
are then computed for each decile/percentile. The lift curve is the
created using the cumulative % population as the x-axis and the
cumulative percentage of events as the y-axis.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/blr_gains_table.html">blr_gains_table</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span>
<span><span class="co">#&gt;    decile total   1   0       ks  tp   tn   fp  fn sensitivity specificity</span></span>
<span><span class="co">#&gt; 1       1   452 256 196 44.62134 256 3808  196 261    49.51644    95.10490</span></span>
<span><span class="co">#&gt; 2       2   452 128 324 61.28765 384 3484  520 133    74.27466    87.01299</span></span>
<span><span class="co">#&gt; 3       3   452  62 390 63.53965 446 3094  910  71    86.26692    77.27273</span></span>
<span><span class="co">#&gt; 4       4   452  31 421 59.02130 477 2673 1331  40    92.26306    66.75824</span></span>
<span><span class="co">#&gt; 5       5   452  10 442 49.91657 487 2231 1773  30    94.19729    55.71928</span></span>
<span><span class="co">#&gt; 6       6   452  14 438 41.68544 501 1793 2211  16    96.90522    44.78022</span></span>
<span><span class="co">#&gt; 7       7   452   7 445 31.92552 508 1348 2656   9    98.25919    33.66633</span></span>
<span><span class="co">#&gt; 8       8   452   4 448 21.51040 512  900 3104   5    99.03288    22.47752</span></span>
<span><span class="co">#&gt; 9       9   452   3 449 10.87689 515  451 3553   2    99.61315    11.26374</span></span>
<span><span class="co">#&gt; 10     10   453   2 451  0.00000 517    0 4004   0   100.00000     0.00000</span></span>
<span><span class="co">#&gt;    accuracy</span></span>
<span><span class="co">#&gt; 1  89.89162</span></span>
<span><span class="co">#&gt; 2  85.55629</span></span>
<span><span class="co">#&gt; 3  78.30126</span></span>
<span><span class="co">#&gt; 4  69.67485</span></span>
<span><span class="co">#&gt; 5  60.11944</span></span>
<span><span class="co">#&gt; 6  50.74099</span></span>
<span><span class="co">#&gt; 7  41.05286</span></span>
<span><span class="co">#&gt; 8  31.23203</span></span>
<span><span class="co">#&gt; 9  21.36695</span></span>
<span><span class="co">#&gt; 10 11.43552</span></span></code></pre></div>
<div class="section level4">
<h4 id="lift-chart">Lift Chart<a class="anchor" aria-label="anchor" href="#lift-chart"></a>
</h4>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="../reference/blr_gains_table.html">blr_gains_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="introduction_files/figure-html/val7-1.png" width="672" style="display: block; margin: auto;"></p>
</div>
</div>
<div class="section level3">
<h3 id="roc-curve">ROC Curve<a class="anchor" aria-label="anchor" href="#roc-curve"></a>
</h3>
<p>ROC curve is a graphical representation of the validity of cut-offs
for a logistic regression model. The ROC curve is plotted using the
sensitivity and specificity for all possible cut-offs, i.e., all the
probability scores. The graph is plotted using sensitivity on the y-axis
and 1-specificity on the x-axis. Any point on the ROC curve represents a
sensitivity X (1-specificity) measure corresponding to a cut-off. The
area under the ROC curve is used as a validation measure for the model –
the bigger the area the better is the model.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="../reference/blr_gains_table.html">blr_gains_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/blr_roc_curve.html">blr_roc_curve</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="introduction_files/figure-html/val2-1.png" width="672" style="display: block; margin: auto;"></p>
</div>
<div class="section level3">
<h3 id="ks-chart">KS Chart<a class="anchor" aria-label="anchor" href="#ks-chart"></a>
</h3>
<p>The KS Statistic is again a measure of model efficiency, and it is
created using the lift curve. The lift curve is created to plot %
events. If we also plot % non-events on the same scale, with %
population at x-axis, we would get another curve. The maximum distance
between the lift curve for events and that for non-events is termed as
KS. For a good model, KS should be big (&gt;=0.3) and should occur as
close to the event rate as possible.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="../reference/blr_gains_table.html">blr_gains_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/blr_ks_chart.html">blr_ks_chart</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="introduction_files/figure-html/val3-1.png" width="672" style="display: block; margin: auto;"></p>
</div>
<div class="section level3">
<h3 id="decile-lift-chart">Decile Lift Chart<a class="anchor" aria-label="anchor" href="#decile-lift-chart"></a>
</h3>
<p>The decile lift chart displays the lift over the global mean event
rate for each decile. For a model with good discriminatory power, the
top deciles should have an event/conversion rate greater than the global
mean.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/blr_gains_table.html">blr_gains_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/blr_decile_lift_chart.html">blr_decile_lift_chart</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="introduction_files/figure-html/val9-1.png" width="672" style="display: block; margin: auto;"></p>
</div>
<div class="section level3">
<h3 id="capture-rate-by-decile">Capture Rate by Decile<a class="anchor" aria-label="anchor" href="#capture-rate-by-decile"></a>
</h3>
<p>If the model has good discriminatory power, the top deciles should
have a higher event/conversion rate compared to the bottom deciles.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/blr_gains_table.html">blr_gains_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/blr_decile_capture_rate.html">blr_decile_capture_rate</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="introduction_files/figure-html/val8-1.png" width="672" style="display: block; margin: auto;"></p>
</div>
<div class="section level3">
<h3 id="lorenz-curve">Lorenz Curve<a class="anchor" aria-label="anchor" href="#lorenz-curve"></a>
</h3>
<p>The Lorenz curve is a simple graphic device which illustrates the
degree of inequality in the distribution of thevariable concerned. It is
a visual representation of inequality used to measure the discriminatory
power of the predictive model.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/blr_lorenz_curve.html">blr_lorenz_curve</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span></code></pre></div>
<p><img src="introduction_files/figure-html/val4-1.png" width="672" style="display: block; margin: auto;"></p>
</div>
</div>
<div class="section level2">
<h2 id="residual-influence-diagnostics">Residual &amp; Influence Diagnostics<a class="anchor" aria-label="anchor" href="#residual-influence-diagnostics"></a>
</h2>
<p><strong>blorr</strong> can generate 22 plots for residual, influence
and leverage diagnostics.</p>
<div class="section level4">
<h4 id="influence-diagnostics">Influence Diagnostics<a class="anchor" aria-label="anchor" href="#influence-diagnostics"></a>
</h4>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/blr_plot_diag_influence.html">blr_plot_diag_influence</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span></code></pre></div>
<p><img src="introduction_files/figure-html/infl-1.png" width="768" style="display: block; margin: auto;"></p>
</div>
<div class="section level4">
<h4 id="leverage-diagnostics">Leverage Diagnostics<a class="anchor" aria-label="anchor" href="#leverage-diagnostics"></a>
</h4>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/blr_plot_diag_leverage.html">blr_plot_diag_leverage</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span></code></pre></div>
<p><img src="introduction_files/figure-html/lev-1.png" width="672" style="display: block; margin: auto;"></p>
</div>
<div class="section level4">
<h4 id="fitted-values-diagnostics">Fitted Values Diagnostics<a class="anchor" aria-label="anchor" href="#fitted-values-diagnostics"></a>
</h4>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/blr_plot_diag_fit.html">blr_plot_diag_fit</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span></code></pre></div>
<p><img src="introduction_files/figure-html/fit-1.png" width="672" style="display: block; margin: auto;"></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.aravindhebbali.com" class="external-link">Aravind Hebbali</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
